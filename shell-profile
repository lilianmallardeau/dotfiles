# Load plugins
for plugin in "$(dirname $(realpath ${BASH_SOURCE[0]:-${(%):-%x}}))"/shell_plugins/*; do
	source "$plugin"
done

# Custom aliases
alias sl='ls'
alias o='xopen'
alias p='python3'
alias fd='fdfind'
alias igrep='grep -i'
alias getpid='xprop | grep -i pid | sed "s/[^0-9]//g"'
alias freeze='kill -SIGSTOP $(getpid)'
alias unfreeze='kill -SIGCONT $(getpid)'
which bat > /dev/null && alias cat='bat'
which batcat > /dev/null && alias cat='batcat'
which code > /dev/null || alias code='codium'
alias clip='xclip -sel clip'
alias build='cmakebuild'
alias rp='realpath'
alias '?'='echo $?'

# Custom functions
function xopen {
	if [[ $# == 0 ]]; then xdg-open .; return; fi
	for i in "$@"; do
		xdg-open $i
	done
}
function ogrep {
	local args
	while (($#)); do
		args="$args -e $1"
		shift
	done
	cat | eval grep $args
}
function cmakebuild {
	if [[ $(basename "$(pwd)") = build ]]; then
		cmake . &&
		cmake --build .
	else
		cmake -B build &&
		cmake --build build
	fi
}

# Environment variables
if [[ "$TMUX" ]]; then
	export LESS="-R --mouse"
fi
